var S=Object.defineProperty,C=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var y=(r,t,n)=>t in r?S(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n,b=(r,t)=>{for(var n in t||(t={}))U.call(t,n)&&y(r,n,t[n]);if(N)for(var n of N(t))A.call(t,n)&&y(r,n,t[n]);return r},g=(r,t)=>C(r,R(t));import{a as I,j as w,r as d,L as f,u as L,R as j,b as x,c as O,d as H,H as P}from"./vendor.13b7797e.js";const D=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}};D();const E=r=>({getCsrf(){return r.get("/csrf")},login({username:t,password:n}){return new Promise((o,s)=>{setTimeout(()=>{o()},3e3)})}}),F=r=>({getAll(){return r.get("/users")},patch({id:t,username:n}){return r.patch(`/users/${t}`,{username:n})}}),u={},k=I.create({baseURL:"/api/v1"});u.auth=E(k);u.user=F(k);const e=w.exports.jsx,l=w.exports.jsxs,T=[];function M(){const[r,t]=d.exports.useState(T),[n,o]=d.exports.useState(!1),[s,a]=d.exports.useState({uid:"",username:""}),c=()=>{o(!0),u.user.getAll().then(i=>{console.log(i.data),t(i.data)}).finally(()=>{o(!1)})},p=({target:{name:i,value:m}})=>{a(h=>g(b({},h),{[i]:m}))},v=i=>{i.preventDefault();const{uid:m,username:h}=s;m&&h&&u.user.patch({id:m,username:h}).then(()=>{c()}),a({uid:"",username:""})};return d.exports.useEffect(()=>{c()},[]),d.exports.useEffect(()=>{u.auth.getCsrf()},[]),l("div",{children:[e("div",{className:"m-2",children:n&&"Loading"}),e("div",{className:"flex flex-wrap",children:r.map(i=>l("div",{className:"m-2 p-2 border border-gray-300 rounded hover:shadow",children:[l("div",{children:["ID: ",i.id]}),e("div",{children:i.username})]},i.id))}),l("form",{onSubmit:v,className:"mx-4 mt-8 max-w-md",children:[l("div",{className:"grid grid-cols-1 gap-6",children:[l("label",{className:"block",children:[e("span",{className:"text-gray-700",children:"UID"}),e("input",{className:"mt-1 block w-full",type:"text",name:"uid",value:s.uid,onChange:p})]}),l("label",{className:"block",children:[e("span",{className:"text-gray-700",children:"Username"}),e("input",{className:"mt-1 block w-full",type:"text",name:"username",value:s.username,onChange:p})]}),e("input",{className:"mt-1 block w-full bg-transparent hover:bg-blue-50 focus:bg-blue-500 text-blue-700 font-semibold focus:text-white py-2 px-4 border border-blue-500 rounded",type:"submit",value:"Patch"})]}),e("button",{className:"text-base mt-1 block w-full bg-transparent hover:bg-blue-50 focus:bg-blue-500 text-blue-700 font-semibold focus:text-white py-2 px-4 border border-blue-500 rounded",onClick:c,children:"Refresh"})]})]})}function z(){return l("div",{className:"flex gap-x-4 underline m-2",children:[e(f,{to:"/",children:"Home"}),e(f,{to:"/login",children:"Login"}),e(f,{to:"/signup",children:"Register"}),e(f,{to:"/users",children:"Users"})]})}function B(r){return l("svg",g(b({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},r),{children:[e("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}))}function $(){const r=L(),[t,n]=d.exports.useState({username:"",password:""}),[o,s]=d.exports.useState(!1),{username:a,password:c}=t,p=({target:{name:i,value:m}})=>{n(h=>g(b({},h),{[i]:m}))};return e("div",{className:"w-full h-full grid place-items-center",children:e("div",{className:"flex items-center justify-center text-center",children:l("div",{className:"my-4",children:[e("div",{className:"text-2xl",children:"Sign In"}),e("div",{className:"border border-gray-300 rounded m-4 py-6 px-4 mobile-s:px-6",children:l("form",{onSubmit:i=>{i.preventDefault(),s(!0),u.auth.login({username:a,password:c}).then(()=>{r("/")}).catch(()=>{s(!1)})},className:"grid grid-cols-1 gap-2 w-60 mobile-s:w-64 sm:w-72",children:[l("label",{className:"block text-left",children:[e("span",{className:"text-gray-700",children:"Username"}),e("input",{type:"text",name:"username",className:"mt-1 block w-full rounded disabled:opacity-50 disabled:cursor-not-allowed disabled:select-none",placeholder:"",value:a,readOnly:o,disabled:o,onChange:p})]}),l("label",{className:"block text-left",children:[e("span",{className:"text-gray-700",children:"Password"}),e("input",{type:"password",name:"password",className:"mt-1 block w-full rounded disabled:opacity-50 disabled:cursor-not-allowed disabled:select-none",placeholder:"",value:c,readOnly:o,disabled:o,onChange:p})]}),l("button",{type:"submit",className:"relative my-2 flex-shrink-0 bg-blue-600 text-white text-base font-semibold py-2 px-4 rounded-lg hover:shadow-md hover:bg-blue-700 focus:outline-none focus:ring focus:ring-blue-200  disabled:opacity-50 disabled:cursor-wait",disabled:o,children:["Sign in",o&&e("div",{className:"absolute inset-0 flex justify-end items-center",children:e(B,{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white"})})]}),e("div",{className:"border-t mb-2"}),l("div",{children:["No account?"," ",e(f,{to:"/signup",className:"underline text-blue-700",children:"Create one"})]})]})})]})})})}function q(){return l("div",{className:"mx-2",children:[e("h1",{className:"text-xl font-medium px-2",children:"Home Page"}),e("div",{className:"m-4 p-4 border-2 border-indigo-400 rounded",children:"You may put your personal information here."})]})}function K(){return d.exports.useEffect(()=>{u.auth.getCsrf()},[]),l("div",{children:[e(z,{}),l(j,{children:[e(x,{path:"/",element:e(q,{})}),e(x,{path:"/login",element:e($,{})}),e(x,{path:"/users",element:e(M,{})}),e(x,{path:"*",element:e("div",{children:"React Router Not Implement"})})]})]})}O.render(e(H.StrictMode,{children:e(P,{children:e(K,{})})}),document.getElementById("root"));
